<h2>End Current Round</h2>

@if (loading) {
    <app-loading></app-loading>
} @else {
    @if (successMessage) {
        <div class="alert alert-dismissible alert-success mt-3">
            <button type="button" class="btn-close" data-bs-dismiss="alert" (click)="clearAlert()"></button>
            {{ successMessage }}
        </div>
    }

    @if (errorMessage) {
        <div class="alert alert-dismissible alert-primary mt-3">
            <button type="button" class="btn-close" data-bs-dismiss="alert" (click)="clearAlert()"></button>
            {{ errorMessage }}
        </div>
    }

    <div class="mt-3">
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                Current Round
                <span class="badge bg-primary rounded-pill">{{ currentRound }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                Total Races Expected
                <span class="badge bg-primary rounded-pill">{{ totalRacesExpected }}</span>
            </li>            <li class="list-group-item d-flex justify-content-between align-items-center">
                Total Races Awaiting Results
                <span class="badge bg-primary rounded-pill">{{ awaitingResults }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                Total Races Completed
                <span class="badge bg-primary rounded-pill">{{ completedRaces }}</span>
            </li>
        </ul>

        <div class="mt-3">
            @if (canEndRound) {
                <button class="btn btn-primary" (click)="endRound()" >End Round</button>
            } @else {
                <button class="btn btn-primary" disabled>End Round</button>
            }
        </div>
    </div>
}
